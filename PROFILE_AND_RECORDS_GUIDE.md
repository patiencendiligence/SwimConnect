# 프로필 & 수영 기록 완성 가이드 🏊‍♂️

## ✅ 완료된 기능들

### 1. 📱 프로필 화면 개선

**위치**: 하단 탭 > **프로필**

**주요 변경사항**:
- ✅ **Glassmorphism 디자인** 적용
- ✅ **배경색 변경**: `#E8F4FD` (연한 파란색)
- ✅ **수영 기록 카드** 강조 배치
  - 이번 달 통계 요약 (거리, 시간, 횟수)
  - 카드 형태로 눈에 띄게 표시
  - 클릭하면 수영 기록 대시보드로 이동

**카드 구성**:
```
┌──────────────────────────────────┐
│  🌊 내 수영 기록           →     │
│                                  │
│  이번 달    │   총 시간   │  횟수 │
│   1.5km    │    45분    │  3회  │
└──────────────────────────────────┘
```

**메뉴 구성**:
1. 프로필 수정
2. ~~수영 기록~~ (카드로 분리)
3. 친구 관리
4. 설정
5. 로그아웃

---

### 2. 📊 수영 기록 대시보드 (완전 개선)

**위치**: 프로필 > **내 수영 기록** 클릭

**기능**:

#### 📅 기간 선택
- **주간**: 최근 7일
- **월간**: 이번 달 (기본)
- **전체**: 전체 기간

#### 📊 주요 통계 (2x2 그리드)
- 🌊 총 거리
- ⏱️ 총 시간
- 🏋️ 수영 횟수
- 🔥 소모 칼로리

#### 🏊 영법별 상세 분석
- 각 영법마다 카드
- 프로그레스 바 (색상별 구분)
- 퍼센트, 총 거리, 횟수 표시

#### 📈 월별 추이
- 최근 6개월
- 월별 카드 (거리, 시간, 횟수)

#### ⌚ Apple Watch 연동 안내
- 건강 데이터 연동 버튼
- 추후 구현 예정

#### ➕ 수영 기록 추가 FAB
- 우측 하단 플로팅 버튼
- 클릭 시 기록 입력 화면으로 이동

---

### 3. ➕ 수영 기록 입력 화면 (신규)

**위치**: 수영 기록 대시보드 > **+ 버튼**

**입력 항목**:

1. **📅 날짜 선택**
   - 달력 아이콘 클릭
   - DateTimePicker로 날짜 선택
   - 오늘 날짜까지만 선택 가능

2. **📏 거리 입력** (m)
   - 숫자 키패드
   - 예: 1000

3. **⏱️ 시간 입력** (분)
   - 숫자 키패드
   - 예: 30

4. **🏊 영법 선택**
   - 자유형 (기본)
   - 배영
   - 평영
   - 접영
   - 혼영

5. **📊 예상 정보 (자동 계산)**
   - 🔥 소모 칼로리
   - ⚡ 평균 페이스 (분:초/100m)

**계산 공식**:
```typescript
칼로리 = 거리(m) × 0.3
평균 페이스 = (시간(분) × 60) / (거리(m) / 100)
```

**저장 버튼**:
- 유효성 검사
- Firestore 저장 (TODO)
- 성공 시 수영 기록 화면으로 돌아가기

---

### 4. ❤️ 수영장 즐겨찾기 기능 (신규)

**위치**: 수영장 상세 화면

**기능**:

#### 즐겨찾기 버튼
- 위치: 수영장 이름 우측
- 아이콘:
  - 비활성: ♡ (heart-outline) - 회색
  - 활성: ❤️ (heart) - 빨간색
- 클릭 시 토글
- 성공/실패 알림

#### 데이터 저장
```typescript
User {
  ...
  favoritePoolIds: string[] // 즐겨찾기한 수영장 ID 목록
}
```

#### Firestore 함수
```typescript
// 즐겨찾기 토글 (추가/제거)
togglePoolFavorite(userId: string, poolId: string): Promise<boolean>

// 즐겨찾기한 수영장 목록 가져오기
getFavoritePools(userId: string): Promise<Pool[]>
```

---

## 🗂️ 파일 구조

### 신규 생성된 파일
```
src/
├── screens/
│   └── Profile/
│       └── SwimRecordInputScreen.tsx  (신규) - 수영 기록 입력 화면
├── utils/
│   └── swimStats.ts  (기존) - 통계 계산 함수들
└── types/
    └── index.ts  (수정) - User 타입에 favoritePoolIds 추가
```

### 수정된 파일
```
src/
├── screens/
│   └── Profile/
│       ├── ProfileMainScreen.tsx  (개선) - 수영 기록 카드 추가, Glassmorphism
│       ├── SwimRecordsScreen.tsx  (개선) - + FAB 추가
│   └── Pool/
│       └── PoolDetailScreen.tsx  (개선) - 즐겨찾기 버튼 추가
├── services/
│   └── firestore.ts  (추가) - togglePoolFavorite, getFavoritePools 함수
└── navigation/
    ├── ProfileStack.tsx  (추가) - SwimRecordInput 화면 등록
    └── types.ts  (추가) - SwimRecordInput 타입 추가
```

---

## 🎯 사용 흐름

### 프로필에서 수영 기록 보기
1. 앱 실행
2. 하단 탭 > **프로필** 클릭
3. **"내 수영 기록"** 카드 확인 (이번 달 요약)
4. 카드 클릭 → 수영 기록 대시보드

### 수영 기록 추가하기
1. 수영 기록 대시보드 진입
2. 우측 하단 **+ 버튼** 클릭
3. 날짜, 거리, 시간, 영법 입력
4. 예상 칼로리/페이스 확인
5. **"기록 저장"** 버튼 클릭

### 수영장 즐겨찾기
1. 하단 탭 > **수영장** 클릭
2. 수영장 선택 → 상세 화면
3. 우측 상단 **♡ 버튼** 클릭
4. ❤️로 변경되며 즐겨찾기 추가
5. 다시 클릭하면 제거

---

## 🎨 디자인 특징

### Glassmorphism 적용
- 배경: `#E8F4FD` (연한 파란색)
- 카드: `rgba(255, 255, 255, 0.3)` ~ `0.5`
- 그림자: 부드러운 하얀색 그림자
- 둥근 모서리: `borderRadius: 20` ~ `24`

### 색상 팔레트
```css
배경: #E8F4FD
주요 색상 (Primary): #007AFF
성공 (Success): #34C759
경고 (Warning): #FF9500
위험 (Danger): #FF3B30
보라 (Purple): #AF52DE
금색 (Gold): #FFD700
```

### 영법별 색상
- 자유형: `#007AFF` (파란색)
- 배영: `#34C759` (초록색)
- 평영: `#FF9500` (주황색)
- 접영: `#FF3B30` (빨간색)
- 혼영: `#AF52DE` (보라색)

---

## 📊 데이터 구조

### User 타입
```typescript
interface User {
  id: string;
  email: string;
  nickname: string;
  profileImage?: string;
  level: number;
  swimRecords: SwimRecord[];
  friends: string[];
  favoritePoolIds?: string[]; // 신규 추가 ⭐
  createdAt: Date;
}
```

### SwimRecord 타입
```typescript
interface SwimRecord {
  id: string;
  userId: string;
  distance: number;         // 미터
  duration: number;         // 분
  date: Date;
  poolId?: string;
  strokeType?: 'freestyle' | 'backstroke' | 'breaststroke' | 'butterfly' | 'medley';
  calories?: number;        // 소모 칼로리
  avgPace?: number;        // 평균 페이스 (초/100m)
}
```

---

## 🔜 향후 개선 사항

### 1. Firestore 연동 완료
```typescript
// SwimRecordInputScreen.tsx에서
await addSwimRecord(user.id, newRecord);
```

### 2. Apple Health 연동
- `react-native-health` 라이브러리
- 자동 수영 기록 동기화
- 심박수, 칼로리 등 추가 데이터

### 3. 즐겨찾기 관리 화면
- 즐겨찾기한 수영장 목록 화면
- 프로필 메뉴에 추가
- 삭제, 정렬 기능

### 4. 수영 목표 설정
- 월간/주간 목표 설정
- 목표 달성률 표시
- 알림 기능

### 5. 소셜 기능
- 친구와 기록 비교
- 리더보드
- 챌린지 시스템

---

## 🧪 테스트 체크리스트

### 프로필 화면
- [ ] 프로필 화면이 Glassmorphism 스타일로 표시되는지
- [ ] 수영 기록 카드가 눈에 띄게 배치되었는지
- [ ] 이번 달 통계가 올바르게 계산되는지
- [ ] 데이터가 없을 때 "아직 수영 기록이 없습니다" 표시되는지
- [ ] 카드 클릭 시 수영 기록 대시보드로 이동하는지

### 수영 기록 대시보드
- [ ] 주간/월간/전체 기간 전환이 작동하는지
- [ ] 주요 통계 (거리, 시간, 횟수, 칼로리)가 표시되는지
- [ ] 영법별 분석이 올바르게 표시되는지
- [ ] 월별 추이가 표시되는지 (전체 모드)
- [ ] + FAB 클릭 시 입력 화면으로 이동하는지

### 수영 기록 입력
- [ ] 날짜 선택이 작동하는지
- [ ] 거리, 시간 입력이 작동하는지
- [ ] 영법 선택이 작동하는지
- [ ] 예상 칼로리/페이스가 자동 계산되는지
- [ ] 유효성 검사가 작동하는지
- [ ] 저장 버튼 클릭 시 알림이 표시되는지

### 수영장 즐겨찾기
- [ ] 즐겨찾기 버튼이 표시되는지
- [ ] 클릭 시 ♡ ↔ ❤️ 토글되는지
- [ ] 성공 알림이 표시되는지
- [ ] User 데이터에 favoritePoolIds가 저장되는지

---

**작성일**: 2024년 11월 5일  
**버전**: 2.0.0  
**상태**: ✅ 완료 및 적용됨

---

## 🎉 요약

프로필 화면이 완전히 개선되었습니다!

- ✅ **프로필**: 수영 기록 카드 강조
- ✅ **수영 기록 대시보드**: 완벽한 통계 및 분석
- ✅ **수영 기록 입력**: 간편한 기록 추가
- ✅ **수영장 즐겨찾기**: 원하는 수영장 저장

이제 사용자가 자신의 수영 여정을 효과적으로 관리하고 추적할 수 있습니다! 🏊‍♂️💙

